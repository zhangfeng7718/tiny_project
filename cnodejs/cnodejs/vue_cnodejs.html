<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <!-- meta -->
    <meta charset="utf-8" />
    <meta name='description' content='CNode：Node.js专业中文社区'>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="keywords" content="nodejs, node, express, connect, socket.io" />
    <!-- see http://smerity.com/articles/2013/where_did_all_the_http_referrers_go.html -->
    <meta name="referrer" content="always">
    <meta name="author" content="EDP@TaoBao" />
    <meta property="wb:webmaster" content="617be6bd946c6b96" />
    <link title="RSS" type="application/rss+xml" rel="alternate" href="/rss" />
    <link rel="icon" href="//static2.cnodejs.org/public/images/cnode_icon_32.png" type="image/x-icon" />
    <!-- style -->
    <link rel="stylesheet" href="//static2.cnodejs.org/public/stylesheets/index.min.23a5b1ca.min.css" media="all" />
    <!-- scripts -->
    <!-- <script src="//static2.cnodejs.org/public/index.min.f7c13f64.min.js"></script> -->
    <title>CNode：Node.js专业中文社区</title>

    <meta content="_csrf" name="csrf-param">
    <meta content="fgahyo0J-8C4tj35b-OfLvedibcwwaItZeBU" name="csrf-token">
</head>

<body>
    <!-- navbar -->
    <div class='navbar'>
        <div class='navbar-inner'>
            <div class='container'>
                <a class='brand' href='/'>
                    <img src="//static2.cnodejs.org/public/images/cnodejs_light.svg" />
                </a>
                <form id='search_form' class='navbar-search' action="/search">
                    <input type='text' id='q' name='q' class='search-query span3' value='' />
                </form>
                <ul class='nav pull-right'>
                    <li><a href='/'>首页</a></li>
                    <li><a href='/getstart'>新手入门</a></li>
                    <li><a href='/api'>API</a></li>
                    <li><a href="/about" target="">关于</a></li>
                    <li><a href='/signup'>注册</a></li>
                    <li><a href='/signin'>登录</a></li>

                </ul>
                <a class="btn btn-navbar" id="responsive-sidebar-trigger">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
            </div>
        </div>
    </div>




    <div id='main'>
        <div id='sidebar'>
            <div class='panel'>

                <div class='inner'>
                    <p>CNode：Node.js专业中文社区</p>

                    <div>
                        您可以
                        <a href='/signin'>登录</a> 或
                        <a href='/signup'>注册</a> , 也可以
                        <a href="/auth/github">
                            <span class="span-info">
                    通过 GitHub 登录
                </span>
                        </a>
                    </div>
                </div>

            </div>
            <div class='panel'>
                <div class='inner ads'>



                    <a href="https://sensors.qiniu.com/t/1s" target="_blank" class="banner sponsor_outlink" data-label="qiniu-sidebar">
                        <img src="//static.cnodejs.org/FgIok2ZlDer2QOb8sJ20S9Y8T2Jq">
                    </a>


                    <div class="sep10"></div>

                    <a href="https://www.aliyun.com/product/nodejs?ref=cnode" target="_blank" class="banner sponsor_outlink" data-label="alinode">
                        <img src="//static.cnodejs.org/Fn4D6BhOTz1IswvmzeZ1q7QW1ls_">
                    </a>


                    <div class="sep10"></div>

                    <a href="https://www.ucloud.cn/site/active/gift.html?utm_source=cnodejs&utm_medium=content_pic_pc_540_130&utm_campaign=huodong&utm_content=gift&ytag=cnodejs" target="_blank" class="banner sponsor_outlink" data-label="ucloud-banner">
                        <img src="//static.cnodejs.org/FlajCCXkxZaOsuWp3k0iaiqfrJaS">
                    </a>

                </div>
            </div>
            <div class='panel'>
                <div class='header'>
                    <span class='col_fade'>无人回复的话题</span>
                </div>
                <div class='inner'>

                    <ul class="unstyled">
                        <li>
                            <div><a class='dark topic_title' href="/topic/5f40919a68156574e6e6ce9d" title="nodejs开发什么项目">nodejs开发什么项目</a>
                            </div>
                        </li>
                        <li>
                            <div><a class='dark topic_title' href="/topic/5f401e1ae8a599751bb50c0c" title="分享翻墙vpn，科学上网，可以免费试用和提供免费节点。">分享翻墙vpn，科学上网，可以免费试用和提供免费节点。</a>
                            </div>
                        </li>
                        <li>
                            <div><a class='dark topic_title' href="/topic/5f4014e368156574e6e6ce64" title="用Electron和shadowsocks-libev实现的简单的Shadowsocks客户端，electron-lightyearvpn">用Electron和shadowsocks-libev实现的简单的Shadowsocks客户端，electron-lightyearvpn</a>
                            </div>
                        </li>
                        <li>
                            <div><a class='dark topic_title' href="/topic/5f3e410368156574e6e6cb81" title="【译】看看 Segment 团队如何自动化他们的基础架构以赋能工程师！">【译】看看 Segment 团队如何自动化他们的基础架构以赋能工程师！</a>
                            </div>
                        </li>
                        <li>
                            <div><a class='dark topic_title' href="/topic/5f3e13e4e8a599751bb508a7" title="[Concent小课堂]认识组合api，换个姿势撸更清爽的react">[Concent小课堂]认识组合api，换个姿势撸更清爽的react</a>
                            </div>
                        </li>

                    </ul>

                </div>
            </div>
            <div class='panel'>
                <div class='header'>
                    <span class='col_fade'>积分榜</span> &nbsp;
                    <a class='dark' href='/users/top100'>TOP 100 &gt;&gt;</a>
                </div>
                <div class='inner'>

                    <ol>
                        <li>
                            <span class='top_score'>22395</span>
                            <span class="user_name"><a href="/user/i5ting">i5ting</a></span>
                        </li>
                        <li>
                            <span class='top_score'>15830</span>
                            <span class="user_name"><a href="/user/alsotang">alsotang</a></span>
                        </li>
                        <li>
                            <span class='top_score'>9810</span>
                            <span class="user_name"><a href="/user/atian25">atian25</a></span>
                        </li>
                        <li>
                            <span class='top_score'>9350</span>
                            <span class="user_name"><a href="/user/leapon">leapon</a></span>
                        </li>
                        <li>
                            <span class='top_score'>8780</span>
                            <span class="user_name"><a href="/user/jiyinyiyong">jiyinyiyong</a></span>
                        </li>
                        <li>
                            <span class='top_score'>7510</span>
                            <span class="user_name"><a href="/user/yakczh">yakczh</a></span>
                        </li>
                        <li>
                            <span class='top_score'>6855</span>
                            <span class="user_name"><a href="/user/im-here">im-here</a></span>
                        </li>
                        <li>
                            <span class='top_score'>6120</span>
                            <span class="user_name"><a href="/user/DevinXian">DevinXian</a></span>
                        </li>
                        <li>
                            <span class='top_score'>5815</span>
                            <span class="user_name"><a href="/user/chapgaga">chapgaga</a></span>
                        </li>
                        <li>
                            <span class='top_score'>5375</span>
                            <span class="user_name"><a href="/user/magicdawn">magicdawn</a></span>
                        </li>

                    </ol>

                </div>
            </div>
            <div class='panel'>
                <div class='header'>
                    <span class='col_fade'>友情社区</span>
                </div>
                <div class='inner'>
                    <ol class="friendship-community">
                        <li>
                            <a href="https://ruby-china.org/" target="_blank">
                                <img src="//static2.cnodejs.org/public/images/ruby-china-20150529.png">
                            </a>
                        </li>
                        <div class="sep10"></div>
                        <li>
                            <a href="http://phphub.org/" target="_blank">
                                <img src="//static2.cnodejs.org/public/images/phphub-logo.png">
                            </a>
                        </li>
                    </ol>
                </div>
            </div>
            <div class='panel'>
                <div class='header'>
                    <span class='col_fade'>客户端二维码</span>
                </div>
                <div class='inner cnode-app-download'>
                    <img width='200' src="//static.cnodejs.org/FtG0YVgQ6iginiLpf9W4_ShjiLfU">
                    <br />
                    <a href="https://github.com/soliury/noder-react-native" target="_blank">客户端源码地址</a>
                </div>
            </div>
        </div>
        <div id="content">
            <!-- <div class="panel">
                <div class="header">
                    <a href="/?tab=all" class="topic-tab current-tab">全部</a>
                    <a href="/?tab=good" class="topic-tab ">精华</a>
                    <a href="/?tab=share" class="topic-tab ">分享</a>
                    <a href="/?tab=ask" class="topic-tab ">问答</a>
                    <a href="/?tab=job" class="topic-tab ">招聘</a>
                    <a href="/?tab=dev" class="topic-tab ">客户端测试</a>
                </div>
                <div class="inner no-padding">
                    <div id="topic_list">
                        <router-view :infos='topicList.data'></router-view>
                    </div>
                    <div class='pagination' current_page='1'>
                        <ul>
                            <li class='disabled'><a>«</a></li>
                            <li class='disabled'><a>1</a></li>
                            <li><a href='/?tab=all&amp;page=2'>2</a></li>
                            <li><a href='/?tab=all&amp;page=3'>3</a></li>
                            <li><a href='/?tab=all&amp;page=4'>4</a></li>
                            <li><a href='/?tab=all&amp;page=5'>5</a></li>
                            <li><a>...</a></li>
                            <li><a href='/?tab=all&amp;page=32'>»</a></li>
                        </ul>
                    </div>

                </div>
            </div> -->
            <router-view :infos='topicList.data'></router-view>
        </div>
    </div>

    <div id='backtotop'>回到顶部</div>
    <div id='footer'>
        <div id='footer_main'>
            <div class="links">
                <a class='dark' href='/rss'>RSS</a> |
                <a class='dark' href='https://github.com/cnodejs/nodeclub/'>源码地址</a>
            </div>

            <div class='col_fade'>

                <p>CNode 社区为国内最专业的 Node.js 开源技术社区，致力于 Node.js 的技术研究。</p>
                <p>服务器赞助商为
                    <a href="http://www.ucloud.cn/?utm_source=zanzhu&utm_campaign=cnodejs&utm_medium=display&utm_content=yejiao&ytag=cnodejs_logo" target="_blank" class="sponsor_outlink" data-label="ucloud_bottom">
                        <img src="//static.cnodejs.org/FuIpEaM9bvsZKnQ3QfPtBHWQmLM9" title="ucloud" alt="ucloud" width="92px" />
                    </a>
                    ，存储赞助商为
                    <a href="http://www.qiniu.com/?ref=cnode" target="_blank" class="sponsor_outlink" data-label="qiniu_bottom">
                        <img src="//static.cnodejs.org/Fg0jtDIcTqVC049oVu5-sn6Om4NX" title="七牛云存储" alt="七牛云存储" width="115px" />
                    </a>
                    ，由
                    <a href="https://www.aliyun.com/product/nodejs?ref=cnode" target="_blank" class="sponsor_outlink" data-label="alinode_bottom">
                        <img src="//static.cnodejs.org/FpMZk31PDyxkC8yStmMQL4XroaGD" title="alinode" alt="alinode" height="54px" width="166px" />
                    </a>提供应用性能服务。
                </p>
                <p>新手搭建 Node.js 服务器，推荐使用无需备案的 <a href="https://www.digitalocean.com/?refcode=eba02656eeb3">DigitalOcean(https://www.digitalocean.com/)</a></p>
            </div>


        </div>
    </div>

    <div id="sidebar-mask"></div>
</body>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<!-- <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script> -->
<script>
    var topicitem = {
        props: ['infos'],
        template: `
        <div class="panel">
            <div class="header">
                <a href="/?tab=all" class="topic-tab current-tab">全部</a>
                <a href="/?tab=good" class="topic-tab ">精华</a>
                <a href="/?tab=share" class="topic-tab ">分享</a>
                <a href="/?tab=ask" class="topic-tab ">问答</a>
                <a href="/?tab=job" class="topic-tab ">招聘</a>
                <a href="/?tab=dev" class="topic-tab ">客户端测试</a>
            </div>
            <div class="inner no-padding">
                <div id="topic_list">
                    <div class='cell' v-for="info in infos">
                        <a class="user_avatar pull-left" href="/user/Q-Angelo">
                            <img :src="info.author.avatar_url" title="Q-Angelo" />
                        </a>
                        <span class="reply_count pull-left">
                            <span class="count_of_replies" title="回复数">{{info.reply_count}}</span>
                        <span class="count_seperator">/</span>
                        <span class="count_of_visits" title='点击数'>{{info.visit_count}}</span>
                        </span>
                        <a class='last_time pull-right' :href="  ('/topic/' +info.id + '#' +info.author_id)">
                            <img class="user_small_avatar" :src="info.author.avatar_url">
                            <span class="last_active_time">{{info.last_reply_at}}</span>
                        </a>
                        <div class="topic_title_wrapper">
                            <span class='put_top'>置顶</span>
                            <router-link :to=" 'topic/' + info.id" class='topic_title'  :title='info.title'>{{  info.title }}</router-link>
                        </div>
                    </div>
                <div>
                <div class='pagination' current_page='1'>
                    <ul>
                        <li class='disabled'><a>«</a></li>
                        <li class='disabled'><a>1</a></li>
                        <li><a href='/?tab=all&amp;page=2'>2</a></li>
                        <li><a href='/?tab=all&amp;page=3'>3</a></li>
                        <li><a href='/?tab=all&amp;page=4'>4</a></li>
                        <li><a href='/?tab=all&amp;page=5'>5</a></li>
                        <li><a>...</a></li>
                        <li><a href='/?tab=all&amp;page=32'>»</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
        `,
    }

    var topicContent = {
        template: `
        <div class='panel'>
            <div class='header topic_header'>
                <span class="topic_full_title">
                    <span class='put_top'>置顶</span>
                    {{topiccontent.title}}
                </span>
                <div class="changes">
                    <span>{{topiccontent.create_at}}</span>
                    <span>作者 <a href="/user/hyj1991">{{topiccontent.author && topiccontent.author.loginname}}</a></span>
                    <span>{{topiccontent.visit_count}} 次浏览</span>
                    <span>最后一次编辑是 {{topiccontent.last_reply_at}}</span>
                    <span> 来自 分享</span>
                </div>
            </div>
            <div class='inner topic'>
                <div class='topic_content'>
                    <div class="markdown-text" ref="markdown">
                    </div>
                </div>
            </div>
        </div>
        `,
        async created() {
            this.getTopicList();
        },
        watch: {
            $route(to, from) {
                // 对路由变化作出响应...  重新进行一次获取
                this.getTopicList();
            }
        },
        methods: {
            async getTopicList() {
                var id = this.$route.params.id;
                var request = await axios.get('https://cnodejs.org/api/v1/topic/' + id);
                console.log(id);
                if (request.status == 200) {
                    this.topiccontent = request.data.data;
                    console.log(this.topiccontent.content)
                    Vue.nextTick(() => {
                        this.$refs.markdown.innerHTML = this.topiccontent.content;
                    })
                }
            }
        },
        data() {
            return {
                topiccontent: {}
            }
        }
    }

    var router = new VueRouter({
        routes: [{
            path: '/',
            component: topicitem,
        }, {
            path: '/topic/:id',
            component: topicContent,
        }]
    })

    var app = new Vue({
        el: '#content',
        router: router,
        async created() {
            this.getTopicList()
        },
        data: {
            topicList: [],
        },
        methods: {
            async getTopicList() {
                var request = await axios.get('https://cnodejs.org/api/v1/topics')
                if (request.status == 200) {
                    this.topicList = request.data;
                    console.log(this.topicList)
                }
            }
        },
    })
</script>

</html>